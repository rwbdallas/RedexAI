<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Coding Chat — Custom Chatbot</title>
<style>
  /* Re-used neon red/black style adapted for a coding chatbot */
  :root{--bg:#050505;--text:#fff;--accent:#ff0033;--card:#0c0c0c}
  .light{--bg:#f5f5f5;--text:#000;--accent:#ff3333;--card:#fff}
  *{box-sizing:border-box}
  body{margin:0;font-family:Inter,Arial,Helvetica,sans-serif;background:var(--bg);color:var(--text);transition:0.3s}
  .bg-animation{position:fixed;inset:0;z-index:-1;background:radial-gradient(circle at 20% 20%, #ff0033, transparent),radial-gradient(circle at 80% 80%, #550000, transparent);filter:blur(60px);animation:moveGlow 12s infinite alternate}
  @keyframes moveGlow{from{transform:scale(1)}to{transform:scale(1.2) translate(-30px,20px)}}
  nav{display:flex;align-items:center;justify-content:space-between;padding:16px 24px;background:rgba(0,0,0,0.6);backdrop-filter:blur(6px);box-shadow:0 0 20px var(--accent)}
  nav h1{margin:0;font-size:1.3rem;color:var(--accent);text-shadow:0 0 8px var(--accent)}
  .controls{display:flex;gap:12px;align-items:center}
  .theme-toggle{padding:8px 12px;border-radius:8px;background:var(--accent);color:white;cursor:pointer}
  .container{display:grid;grid-template-columns:280px 1fr;gap:20px;padding:24px}
  /* side panel */
  .panel{background:var(--card);padding:16px;border-radius:12px;box-shadow:0 6px 30px rgba(0,0,0,0.6)}
  .panel h3{margin-top:0;color:var(--accent)}
  .setting{display:flex;flex-direction:column;gap:8px;margin-bottom:12px}
  input[type=text],textarea,select{padding:10px;border-radius:8px;border:1px solid rgba(255,255,255,0.06);background:transparent;color:var(--text);width:100%}
  .btn{padding:10px;border-radius:8px;border:none;background:var(--accent);color:white;cursor:pointer}
  /* chat area */
  .chat-wrap{display:flex;flex-direction:column;height:75vh}
  .messages{flex:1;overflow:auto;padding:16px;display:flex;flex-direction:column;gap:12px}
  .msg{max-width:78%;padding:12px;border-radius:10px;box-shadow:0 6px 18px rgba(0,0,0,0.6)}
  .msg.user{align-self:flex-end;background:#1a1a1a;color:var(--text)}
  .msg.bot{align-self:flex-start;background:linear-gradient(180deg,#0b0b0b,#151515);color:var(--text);border:1px solid rgba(255,0,51,0.08)}
  .composer{display:flex;gap:8px;padding:12px;background:transparent}
  .composer input{flex:1;padding:12px;border-radius:8px;border:1px solid rgba(255,255,255,0.06);background:transparent;color:var(--text)}
  .small{font-size:0.85rem;color:rgba(255,255,255,0.7)}
  footer{padding:12px;text-align:center;color:rgba(255,255,255,0.5)}
  /* responsive */
  @media(max-width:900px){.container{grid-template-columns:1fr}.panel{position:relative;order:2}.chat-wrap{order:1;height:60vh}}
</style>
</head>
<body>
<div class="bg-animation"></div>
<nav>
  <h1>Coding Chat — Custom Bot</h1>
  <div class="controls">
    <div class="small">Style: Neon / Cyber</div>
    <div class="theme-toggle" onclick="document.body.classList.toggle('light')">Theme</div>
  </div>
</nav>
<div class="container">
  <!-- Side panel: settings, API key, system prompt -->
  <aside class="panel">
    <h3>Bot Settings</h3>
    <div class="setting">
      <label class="small">Model</label>
      <select id="modelSelect">
        <option value="gpt-4o-mini">gpt-4o-mini</option>
        <option value="gpt-4o">gpt-4o</option>
        <option value="gpt-5">gpt-5</option>
      </select>
    </div>

    <div class="setting">
      <label class="small">System Prompt (what the bot should know)</label>
      <textarea id="systemPrompt" rows="4">You are a helpful coding assistant. Answer concisely and include code examples when appropriate.</textarea>
    </div>

    <div class="setting">
      <label class="small">API Mode</label>
      <select id="apiMode">
        <option value="proxy">Use proxy server (recommended)</option>
        <option value="direct">Use API key directly (unsafe - for testing only)</option>
      </select>
    </div>

    <div class="setting">
      <label class="small">OpenAI API Key</label>
      <input type="text" id="apiKey" placeholder="sk-... (leave empty if using proxy)" />
      <div class="small">⚠️ Do NOT paste a production key in public sites. See docs.</div>
    </div>

    <div class="setting">
      <button class="btn" id="startBtn">Start Session</button>
    </div>

    <hr />
    <div class="small">Quick server snippet (recommended):</div>
    <pre class="small" style="background:#000;padding:8px;border-radius:6px;margin-top:8px;overflow:auto;color:#8fd">// Node/Express proxy example
// Store OPENAI_API_KEY in env, never in client
const express = require('express')
const fetch = require('node-fetch')
const app = express(); app.use(express.json());
app.post('/api/chat', async (req,res)=>{
  const r = await fetch('https://api.openai.com/v1/chat/completions',{method:'POST',headers:{'Authorization':`Bearer ${process.env.OPENAI_API_KEY}`,'Content-Type':'application/json'},body:JSON.stringify(req.body)})
  const j = await r.json(); res.json(j);
})
app.listen(3000)
</pre>

    <div class="small">Docs: keep keys secret & server-side proxy recommended.</div>
    <div class="small" style="margin-top:8px;color:#8fd">References: OpenAI docs (API reference, best practices, quickstart).</div>
  </aside>

  <!-- Chat area -->
  <main class="panel chat-wrap">
    <div class="messages" id="messages">
      <div class="msg bot"><strong>Bot</strong><div class="small">Hello! I'm your custom coding assistant — ask me about JS, Python, APIs, and more.</div></div>
    </div>

    <div class="composer">
      <input id="userInput" placeholder="Ask about code, e.g. 'How to read a file in node?'" />
      <button class="btn" id="sendBtn">Send</button>
    </div>
    <div class="small" style="padding:8px">Mode: <span id="modeLabel">proxy</span></div>
  </main>
</div>
<footer>Built with neon style — remember to run a secure proxy in production. <br/>See docs: platform.openai.com.</footer>

<script>
// -- Inline logic to talk to OpenAI either via proxy (/api/chat) or directly (not recommended) --
const sendBtn = document.getElementById('sendBtn');
const userInput = document.getElementById('userInput');
const messages = document.getElementById('messages');
const apiMode = document.getElementById('apiMode');
const apiKeyInput = document.getElementById('apiKey');
const modelSelect = document.getElementById('modelSelect');
const systemPromptEl = document.getElementById('systemPrompt');
const modeLabel = document.getElementById('modeLabel');

apiMode.addEventListener('change', ()=> modeLabel.textContent = apiMode.value);

function appendMessage(who, html){
  const d = document.createElement('div'); d.className = 'msg ' + (who==='user'?'user':'bot'); d.innerHTML = html; messages.appendChild(d); messages.scrollTop = messages.scrollHeight;
}

async function sendMessage(){
  const text = userInput.value.trim(); if(!text) return;
  appendMessage('user', '<strong>You</strong><div class="small">'+escapeHtml(text)+'</div>');
  userInput.value='';
  appendMessage('bot','<em>Thinking...</em>');
  const lastBot = messages.querySelectorAll('.msg.bot');
  const thinking = lastBot[lastBot.length-1];

  const payload = {
    model: modelSelect.value,
    messages:[{role:'system',content:systemPromptEl.value},{role:'user',content:text}],
    max_tokens:800
  };

  try{
    let responseJson;
    if(apiMode.value==='proxy'){
      // call local proxy: POST /api/chat with payload
      const res = await fetch('/api/chat',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(payload)});
      responseJson = await res.json();
    } else {
      // direct mode (unsafe)
      const key = apiKeyInput.value.trim();
      if(!key){alert('Please enter an API key for direct mode.'); return}
      const res = await fetch('https://api.openai.com/v1/chat/completions',{method:'POST',headers:{'Content-Type':'application/json','Authorization':'Bearer '+key},body:JSON.stringify(payload)});
      responseJson = await res.json();
    }

    // handle common response shape from Chat Completions
    const content = (responseJson && responseJson.choices && responseJson.choices[0] && responseJson.choices[0].message && responseJson.choices[0].message.content) || JSON.stringify(responseJson);
    thinking.innerHTML = '<strong>Bot</strong><div class="small">'+escapeHtml(content)+'</div>';
  }catch(err){
    thinking.innerHTML = '<strong>Bot</strong><div class="small">Error: '+escapeHtml(String(err))+'</div>';
  }
}

sendBtn.addEventListener('click', sendMessage);
userInput.addEventListener('keydown', (e)=>{ if(e.key==='Enter'){ sendMessage(); } });

function escapeHtml(s){ return s.replace(/[&<>"']/g, c => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[c])); }

// Small UX: require user to click Start Session to enable direct mode
document.getElementById('startBtn').addEventListener('click', ()=>{
  if(apiMode.value==='direct' && !apiKeyInput.value.trim()){
    if(!confirm('Direct mode will send requests from the browser using your API key. THIS EXPOSES THE KEY TO USERS. Proceed?')) return;
  }
  appendMessage('bot','<div class="small">Session started. Ask your coding question.</div>');
});
</script>

<!-- Important references (do not remove):
- OpenAI API reference & chat completions: https://platform.openai.com/docs/api-reference/chat
- Keep API keys secret / production best practices: https://platform.openai.com/docs/guides/production-best-practices
- Quickstart & examples: https://platform.openai.com/docs/quickstart
-->
</body>
</html>
